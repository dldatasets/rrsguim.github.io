<!doctype html>
<html>
    
  <head>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H0NW5Z2MYC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-H0NW5Z2MYC');
    </script>
        
    <title>TL4BC</title>
    <meta name="description" content="Transfer Learning for Business Cycle Identification.">
    <meta name="keywords" content="Business Cycles, Transfer Learning, Machine Learning, TensorFlow.js">
    <meta name="author" content="Rafael Guimaraes">
               
  </head>
  
	
	
	
  <body>


<p><a href="https://www.rrsguim.com/" target="_blank" rel="noopener">rrsguim.com</a></p>
<p>&nbsp;</p>
<h3>Transfer Learning for Business Cycle Identification (TL4BC)</h3>
<p>&nbsp;</p>
<p>Here you can apply the TL4BC model to your data.</p>
<p>The TL4BC model expects the input data to be preprocessed as follows:</p>
<ol>
<li>seasonally-adjusted;</li>
<li>logarithm in first difference;</li>
<li>normalized;</li>
<li>sorted according to the table below.</li>
</ol>
<p>For technical details, see the original code and the methodology on <a href="https://www.rrsguim.com/tl4bc" target="_blank" rel="noopener">TLBC4 page</a>.</p>


<!-- Spreadsheet sample-->
<style type="text/css">
	table.tableizer-table {
		font-size: 12px;
		border: 1px solid #CCC; 
		font-family: Arial, Helvetica, sans-serif;
	} 
	.tableizer-table td {
		padding: 4px;
		margin: 3px;
		border: 1px solid #CCC;
	}
	.tableizer-table th {
		background-color: #104E8B; 
		color: #FFF;
		font-weight: bold;
	}
</style>
<table class="tableizer-table">
<thead><tr class="tableizer-firstrow"><th>DATE</th><th>GDP</th><th>Income</th><th>Employment</th><th>Industry</th><th>Sales</th></tr></thead><tbody>
 <tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
 <tr><td>2001-12-31</td><td>198,432,644,600</td><td>123,879,069,500</td><td>99.8</td><td>82.9</td><td>51.7</td></tr>
 <tr><td>2002-03-31</td><td>201,120,843,200</td><td>126,458,217,600</td><td>100.6</td><td>87.2</td><td>52.0</td></tr>
 <tr><td>2002-06-30</td><td>203,987,900,700</td><td>127,795,927,100</td><td>101.6</td><td>87.4</td><td>51.7</td></tr>
 <tr><td>2002-09-30</td><td>206,432,390,500</td><td>126,344,139,600</td><td>102.3</td><td>87.3</td><td>51.9</td></tr>
 <tr><td>2002-12-31</td><td>208,852,788,400</td><td>125,843,394,000</td><td>103.2</td><td>88.1</td><td>51.0</td></tr>
 <tr><td>2003-03-31</td><td>206,260,950,600</td><td>126,385,168,700</td><td>104.0</td><td>87.8</td><td>49.3</td></tr>
 <tr><td>2003-06-30</td><td>205,580,100,500</td><td>125,201,198,900</td><td>104.5</td><td>86.4</td><td>48.6</td></tr>
 <tr><td>2003-09-30</td><td>207,677,573,700</td><td>125,490,775,100</td><td>105.1</td><td>87.0</td><td>49.6</td></tr>
 <tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody></table>


<p>&nbsp;</p>
<p>Click the button below to upload your data and see the result. (NOT WORKING YET. ALMOST DONE.)</p>


  <!-- Begin -- Js code for upload csv and parse it client side and then plot them into console -->	  
  <input type="file" id="dealCsv"/>

  <script>	  
  function uploadDealcsv () {}; 

  /*------ Method for read uploded csv file ------*/
  	uploadDealcsv.prototype.getCsv = function(e) {
      let input = document.getElementById('dealCsv');
     	input.addEventListener('change', function() {
       		if (this.files && this.files[0]) {
           		var myFile = this.files[0];
           		var reader = new FileReader();
           		reader.addEventListener('load', function (e) {
               		let csvdata = e.target.result; 
               		parseCsv.getParsecsvdata(csvdata); // calling function for parse csv data 
            	});
           		 reader.readAsBinaryString(myFile);
        	}
      	});
    }

    /*------- Method for parse csv data and display --------------*/
    uploadDealcsv.prototype.getParsecsvdata = function(data) {
        let parsedata = [];
        let newLinebrk = data.split("\n");
        for(let i = 0; i < newLinebrk.length; i++) {
            parsedata.push(newLinebrk[i].split(","))
        }
        console.table(parsedata);
    }

  var parseCsv = new uploadDealcsv();
  parseCsv.getCsv();   

  </script>					      
  <!-- End -- Js code for upload csv and parse it client side and then plot them into console -->	  


	  
<p>&nbsp;</p>
<p><img src="Fig_TL_Brazil.png" alt="" /></p>

	  
	  
  <!-- Tensorflow.js script -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"> </script>   

	
	<!-- Model -->
    <script>
    async function run(){
        const MODEL_URL = 'https://rrsguim.github.io/TL4BC/model.json';
        const model = await tf.loadLayersModel(MODEL_URL);
        console.log(model.summary());
    	const input = tf.tensor([
       [-9.02290123e-02,  6.03514522e-01, -1.99481102e-01,
         1.06380982e+00,  1.93880125e-01],
       [ 3.92742102e-01,  8.22536823e-01,  1.66322082e-01,
         6.79040763e-01, -6.50002622e-01],
       [ 6.62516909e-01,  2.27630213e-01, -8.86335412e-02,
         9.14817520e-01, -7.70751141e-01],
       [-1.31737195e-01, -6.03511483e-01,  2.66608313e-02,
         5.78879351e-02, -4.09418615e-01],
       [-8.67080876e-01, -1.33704260e-01, -1.01777282e-01,
        -4.39147822e-01, -1.37843876e+00],
       [-1.14143234e+00, -3.40597832e+00, -3.47421915e-01,
        -7.45115984e-01, -8.97090801e-01],
       [-2.66367058e-01,  9.87074400e-02,  7.03635585e-03,
        -1.27313170e+00, -4.07318547e-01],
       [ 6.83319758e-01,  1.22692087e+00, -5.94075357e-04,
         2.09346609e+00, -1.63495493e-01],
       [ 7.44048374e-01,  3.36766114e-01,  2.25877232e-01,
         7.98023837e-03, -8.96382694e-01],
       [ 5.49092107e-01, -1.60078067e+00, -1.33343726e-01,
        -1.40435312e-01, -2.85407931e-01],
       [ 5.26872473e-01, -9.42747296e-01,  9.14460476e-02,
         3.03065103e-01, -1.63784185e+00],
       [-1.57217772e+00, -2.12931387e-01, -3.17086852e-02,
        -2.38329239e-01, -2.67704275e+00],
       [-7.73986872e-01, -1.42306421e+00, -3.79142297e-01,
        -7.85325826e-01, -1.43564288e+00],
       [ 3.95971555e-01, -3.88226851e-01, -2.68823899e-01,
         2.07961074e-01,  7.59993323e-01],
       [ 5.70048062e-01,  1.52158894e-01,  2.87690480e-01,
         1.46935533e+00,  1.10863071e+00],
       [ 1.07969239e+00,  5.27090489e-02,  8.26997995e-01,
         8.56361601e-01,  1.30949782e+00],
       [ 1.28843883e+00,  5.31670218e-01,  1.12601743e+00,
         9.27647232e-01,  1.37497119e+00],
       [ 7.33394259e-01,  1.13583952e+00,  1.93857469e+00,
         7.69817926e-01, -2.95803920e-01],
       [ 2.69335911e-01,  1.55563883e+00,  1.14566177e+00,
         4.33790382e-02,  8.56981123e-01],
       [-7.48894302e-01, -1.02139769e+00,  5.98190359e-01,
         8.75185316e-02, -5.29939093e-01],
       [ 1.57759821e+00,  9.15248751e-02,  1.08295427e+00,
         7.03267554e-01,  6.03069518e-01],
       [-1.22579083e+00,  7.78231848e-01,  8.50539876e-01,
        -5.74619655e-01,  4.72722887e-01],
       [ 3.21860378e-01,  6.78485273e-01,  7.25912113e-01,
        -2.64458778e-03,  1.29790750e-01],
       [ 9.92579726e-01,  3.59226844e-01,  8.95393106e-01,
         9.12126344e-01,  4.46946479e-01],
       [-9.66339086e-02,  7.66680002e-01,  6.77352559e-01,
         8.11180842e-02,  1.13046046e-01],
       [ 6.94826858e-01,  3.16283741e-01,  6.55387406e-01,
        -2.19993361e-01,  8.41197555e-01],
       [ 5.36429204e-01,  6.72871179e-01,  6.34007788e-01,
         3.80186108e-01,  1.42209921e+00],
       [ 1.29205522e+00,  1.33948179e+00,  9.77719656e-01,
         7.10941904e-01,  6.72631700e-01],
       [ 1.03664764e+00,  5.58360090e-01,  1.03648419e+00,
         1.10500567e+00,  1.03877249e+00],
       [ 1.85121056e-01, -3.62169194e-02,  6.51220360e-01,
         1.92810380e-01,  7.16634684e-01],
       [ 1.11801684e+00,  1.93672142e+00,  1.32487756e+00,
         7.49377834e-01,  1.34120120e+00],
       [ 8.86878046e-01,  1.29303276e+00,  1.36713374e+00,
         5.38495495e-01,  6.57313265e-01],
       [ 1.19114571e+00,  4.10361582e-01,  1.23947380e+00,
         3.36523324e-01,  1.25422093e+00],
       [ 7.97204646e-01,  1.04189066e+00,  1.28174613e+00,
         4.47067433e-01,  6.89725686e-01],
       [-3.98022917e+00, -2.02458613e+00, -5.18548458e-02,
        -4.46861232e+00, -8.76024612e-01],
       [-1.93258602e+00,  1.70865539e-01, -1.35546648e+00,
        -2.88449874e+00,  1.60351035e-01],
       [ 1.23619994e+00,  1.90517203e+00, -5.41863439e-01,
         1.50253594e+00,  7.44419641e-01],
       [ 1.63323475e+00,  1.42761621e+00,  5.04388150e-01,
         1.69674116e+00,  8.83999301e-01],
       [ 1.63960544e+00,  4.02512380e-02,  1.66994644e+00,
         1.86544950e+00,  1.49366731e+00],
       [ 1.06554488e+00,  6.01452887e-01,  1.45972814e+00,
         1.16575073e+00,  1.73919957e+00],
       [ 8.09027030e-01,  2.43495812e-01,  1.56254248e+00,
         5.23934122e-01,  3.85741806e-01],
       [ 4.36650874e-01,  1.31373393e+00,  1.21514746e+00,
        -5.89933251e-01,  1.04132087e+00],
       [ 6.08471650e-01,  1.25558565e+00,  1.10377313e+00,
         6.31557322e-02,  6.41580872e-01],
       [ 4.49902056e-01,  2.32807565e-01,  1.06889991e+00,
         7.09340682e-01,  2.63091661e-01],
       [ 5.81008271e-01,  5.83402700e-01,  7.53805025e-01,
        -3.18137057e-01,  6.06118135e-01],
       [-5.03299571e-01, -9.42222459e-01,  5.90776426e-01,
        -7.41150983e-01,  1.00250109e-01],
       [-2.06838492e-01, -1.24375046e-01,  4.33716746e-01,
        -6.33862160e-01,  3.69404691e-01],
       [-4.97025574e-01,  6.32183457e-01,  4.85721303e-01,
        -9.97939012e-01,  1.96197108e+00],
       [ 1.47129481e-01,  9.08404603e-02,  1.32687965e-01,
         2.84018383e-02,  4.53011195e-01],
       [ 8.44010306e-01,  5.43207403e-01,  1.89584075e-01,
         1.00764206e+00,  5.65934934e-01],
       [-2.53088485e-01,  3.85673897e-01, -2.17922669e-01,
        -5.22578762e-02, -4.02250558e-01],
       [-5.62919273e-01, -1.60656672e-01, -1.56586998e-01,
        -2.46088996e-01, -4.66191235e-01],
       [ 1.50514298e+00,  5.49030560e-01, -3.12026337e-02,
         7.17183947e-01,  4.18658155e-01],
       [-1.71661237e-01, -4.81177015e-02, -1.67871478e-01,
        -5.28728217e-02,  1.62971704e+00],
       [-4.76418778e-01, -6.37213085e-01,  2.01621237e-02,
        -7.43461754e-01, -5.90632430e-01],
       [-5.90847719e-02,  8.34624193e-01, -2.43182073e-01,
        -2.84778791e-01, -2.87513946e-01],
       [-1.58949168e+00, -1.07531104e+00, -6.29371281e-01,
        -1.23247697e+00, -7.72364240e-01],
       [-3.18547305e-01, -4.97599920e-01, -6.93846733e-01,
         1.87325162e-01, -5.90690649e-01],
       [-1.04128040e-01,  7.39921358e-01, -8.21460611e-01,
        -5.69184505e-01,  1.47383493e-02],
       [-1.48746174e+00, -2.11906909e+00, -1.39447762e+00,
        -1.18669458e+00, -1.37925153e+00],
       [-2.41092212e+00, -2.32425475e+00, -2.03837258e+00,
        -1.59655344e+00, -2.13810245e+00],
       [-1.74303867e+00, -2.21503779e+00, -2.24360961e+00,
        -1.43087141e+00, -2.30872982e+00],
       [-1.19574446e+00, -1.18520728e+00, -2.38960677e+00,
        -1.56451649e+00, -9.82554032e-01],
       [-1.24653562e+00, -1.75351861e+00, -2.20734324e+00,
        -5.01734924e-01, -2.23998150e+00],
       [-6.12847372e-01, -1.19455763e+00, -2.22082807e+00,
        -2.28772434e-01, -8.64153548e-01],
       [-1.06138346e+00, -8.45034933e-01, -1.89484723e+00,
        -5.07009517e-01, -1.67964431e+00],
       [-9.22201425e-01, -7.20080119e-01, -1.83406523e+00,
        -2.30553246e-01, -1.21611582e+00],
       [ 9.32582367e-01, -4.16493992e-02, -1.42816762e+00,
         1.05855735e+00,  1.37292698e+00],
       [-1.30715508e-01,  6.94983886e-01, -1.15476032e+00,
        -1.81828136e-01,  4.00475218e-01],
       [-4.22997087e-01,  3.44188198e-01, -8.79926753e-01,
         4.06321603e-01, -2.00933199e-01],
       [-2.32326239e-01, -2.36216715e-01, -7.42688762e-01,
         8.42806157e-01, -7.93006937e-01],
       [ 7.96720134e-02, -1.59235025e-01, -5.37781340e-01,
        -1.34993722e-01,  1.90884430e-01],
       [-4.68155662e-01, -6.78031086e-01, -6.07344668e-01,
        -1.29656255e+00,  3.11499343e-01],
       [-1.40978428e-02,  4.71399519e-02, -6.08322945e-01,
         9.38102584e-01, -7.87654575e-01],
       [-4.62240147e-01, -3.15830912e-01, -4.73819007e-01,
        -6.69623660e-01, -5.94532156e-01],
       [-4.88167143e-01, -7.42478080e-02, -4.08298851e-01,
        -2.70596556e-01, -7.91650033e-02],
       [-3.31965522e-02, -4.07314297e-01, -7.46659953e-01,
        -3.16555468e-01, -4.65803906e-01],
       [ 5.41117932e-02,  6.49723256e-02, -4.11658968e-01,
        -6.11708824e-04,  4.87488285e-01],
       [-4.64505371e-02, -1.40467214e-01, -3.47421915e-01,
        -8.00374193e-04, -8.99031336e-02]]);
        const result = model.predict(input);
        alert(result)
	}
	run();
    </script>	  
	  



	  
	  
  </body>


</html>
