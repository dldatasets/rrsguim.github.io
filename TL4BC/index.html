<!doctype html>
<html>
    
  <head>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H0NW5Z2MYC"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-H0NW5Z2MYC');
    </script>
        
    <title>TL4BC</title>
    <meta name="description" content="Transfer Learning for Business Cycle Identification.">
    <meta name="keywords" content="Business Cycles, Transfer Learning, Machine Learning, TensorFlow.js">
    <meta name="author" content="Rafael Guimaraes">
               
  </head>
  
	
	
	
  <body>


<p><a href="https://www.rrsguim.com/" target="_blank" rel="noopener">rrsguim.com</a></p>
<p>&nbsp;</p>
<h3>Transfer Learning for Business Cycle Identification (TL4BC)</h3>
<p>&nbsp;</p>
<p>Here you can apply the TL4BC model to your data.</p>
<p>The TL4BC model expects the input data to be preprocessed as follows:</p>
<ol>
<li>seasonally-adjusted;</li>
<li>logarithm in first difference;</li>
<li>normalized;</li>
<li>sorted according to the table below.</li>
</ol>
<p>For technical details, see the original code and the methodology on <a href="https://www.rrsguim.com/tl4bc" target="_blank" rel="noopener">TLBC4 page</a>.</p>


<!-- Spreadsheet sample-->
<style type="text/css">
	table.tableizer-table {
		font-size: 12px;
		border: 1px solid #CCC; 
		font-family: Arial, Helvetica, sans-serif;
	} 
	.tableizer-table td {
		padding: 4px;
		margin: 3px;
		border: 1px solid #CCC;
	}
	.tableizer-table th {
		background-color: #104E8B; 
		color: #FFF;
		font-weight: bold;
	}
</style>
<table class="tableizer-table">
<thead><tr class="tableizer-firstrow"><th>DATE</th><th>GDP</th><th>Income</th><th>Employment</th><th>Industry</th><th>Sales</th></tr></thead><tbody>
 <tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
 <tr><td>2001-12-31</td><td>198,432,644,600</td><td>123,879,069,500</td><td>99.8</td><td>82.9</td><td>51.7</td></tr>
 <tr><td>2002-03-31</td><td>201,120,843,200</td><td>126,458,217,600</td><td>100.6</td><td>87.2</td><td>52.0</td></tr>
 <tr><td>2002-06-30</td><td>203,987,900,700</td><td>127,795,927,100</td><td>101.6</td><td>87.4</td><td>51.7</td></tr>
 <tr><td>2002-09-30</td><td>206,432,390,500</td><td>126,344,139,600</td><td>102.3</td><td>87.3</td><td>51.9</td></tr>
 <tr><td>2002-12-31</td><td>208,852,788,400</td><td>125,843,394,000</td><td>103.2</td><td>88.1</td><td>51.0</td></tr>
 <tr><td>2003-03-31</td><td>206,260,950,600</td><td>126,385,168,700</td><td>104.0</td><td>87.8</td><td>49.3</td></tr>
 <tr><td>2003-06-30</td><td>205,580,100,500</td><td>125,201,198,900</td><td>104.5</td><td>86.4</td><td>48.6</td></tr>
 <tr><td>2003-09-30</td><td>207,677,573,700</td><td>125,490,775,100</td><td>105.1</td><td>87.0</td><td>49.6</td></tr>
 <tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
</tbody></table>


<p>&nbsp;</p>
<p>Click the button below to upload your data and see the result. (NOT WORKING YET. ALMOST DONE.)</p>


  <!-- Begin -- Js code for upload csv and parse it client side and then plot them into console -->	  
  <input type="file" id="dealCsv"/>

  <script>	  
  function uploadDealcsv () {}; 

  /*------ Method for read uploded csv file ------*/
  	uploadDealcsv.prototype.getCsv = function(e) {
      let input = document.getElementById('dealCsv');
     	input.addEventListener('change', function() {
       		if (this.files && this.files[0]) {
           		var myFile = this.files[0];
           		var reader = new FileReader();
           		reader.addEventListener('load', function (e) {
               		let csvdata = e.target.result; 
               		parseCsv.getParsecsvdata(csvdata); // calling function for parse csv data 
            	});
           		 reader.readAsBinaryString(myFile);
        	}
      	});
    }

    /*------- Method for parse csv data and display --------------*/
    uploadDealcsv.prototype.getParsecsvdata = function(data) {
        let parsedata = [];
        let newLinebrk = data.split("\n");
        for(let i = 0; i < newLinebrk.length; i++) {
            parsedata.push(newLinebrk[i].split(","))
        }
        console.table(parsedata);
    }

  var parseCsv = new uploadDealcsv();
  parseCsv.getCsv();   

  </script>					      
  <!-- End -- Js code for upload csv and parse it client side and then plot them into console -->	  


	  
<p>&nbsp;</p>
<p><img src="Fig_TL_Brazil.png" alt="" /></p>

	  
	  
  <!-- Tensorflow.js script -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"> </script>   

	
	<!-- Model -->
    <script>
    async function run(){
        const MODEL_URL = 'https://rrsguim.github.io/TL4BC/model.json';
        const model = await tf.loadLayersModel(MODEL_URL);
        console.log(model.summary());
    	const input = ([-9.02290123e-02,  6.03514522e-01, -1.99481102e-01, 1.06380982e+00,  1.93880125e-01].T);
        const result = model.predict(input);
        alert(result)
	}
	run();
    </script>	  
	  



	  
	  
  </body>


</html>
